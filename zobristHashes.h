// Generated with the help of scripts/generate64BitZobristKeys.cpp
// All keys are have a Hamming distance of at least 18 bits from any other key. The average Hamming distance between two keys is 32.0436 bits.

#pragma once
#include <array>
#include <cstdint>

namespace ZobristHashes {
	// this creates an anonymous namespace, effectively making these private members of the ZobristHashes namespace
	namespace {
		constexpr std::array<hash_t, 302> PieceHashes = {
			0ULL,
			2730226060588179675ULL,
			4301660182550268777ULL,
			10806292143925507243ULL,
			12749803583236526400ULL,
			2960735812660883808ULL,
			8603763018843544753ULL,
			9115273830126386625ULL,
			18380522441443667204ULL,
			10637154516735361883ULL,
			10959122493204709803ULL,
			11687718542247112142ULL,
			18373982550478160601ULL,
			13542436709001304210ULL,
			5564028365241990822ULL,
			16604986138423072288ULL,
			3207964776452849778ULL,
			18160028281596563349ULL,
			9284792128932888775ULL,
			6790275245353464449ULL,
			12183816256580977514ULL,
			18188073081328090313ULL,
			10645653559346843544ULL,
			12347983151003116397ULL,
			15147325772760549137ULL,
			11827435741943567418ULL,
			1431216217776747012ULL,
			13574869074064337048ULL,
			9926053196390565261ULL,
			15398678753997170677ULL,
			16391151018846280156ULL,
			16530134920166441483ULL,
			6846839940601736315ULL,
			13053832092164247543ULL,
			72962997635707219ULL,
			3402060387810900533ULL,
			9694082631405314636ULL,
			17249259083254156010ULL,
			8948129323822934675ULL,
			2589336791507822359ULL,
			18313844170376219961ULL,
			5798958319089624382ULL,
			9545935524259259526ULL,
			342614550815016140ULL,
			5872387677003081632ULL,
			13007746802186839037ULL,
			14820834748073703001ULL,
			2040745974623614477ULL,
			2659424404003173675ULL,
			14551509661001075564ULL,
			3881248044232940774ULL,
			14808699128745068846ULL,
			14352121563698063336ULL,
			15742873411524151891ULL,
			7862523915756813851ULL,
			4638932385987618903ULL,
			14852880374408095419ULL,
			12183726830735099363ULL,
			1825986594365040473ULL,
			16919873149116920174ULL,
			15087612027925288604ULL,
			2743688598811736ULL,
			16055871218672780926ULL,
			15574109820789367343ULL,
			10873583537126415077ULL,
			12333028087415395656ULL,
			14682808584264992681ULL,
			8153455248825353650ULL,
			11721704067259019123ULL,
			13238482584775270527ULL,
			11044473204836531256ULL,
			16791107308933401731ULL,
			15629444959990291027ULL,
			4045932735263338811ULL,
			8564362910930581138ULL,
			18218493868371134584ULL,
			810224198528021891ULL,
			17783683760189223337ULL,
			9769851407187641205ULL,
			9069091413342941116ULL,
			4260792892987323573ULL,
			17464994134427530957ULL,
			12594099154017497738ULL,
			11411643116250787912ULL,
			5928818155863637773ULL,
			11108715051967477998ULL,
			14654479531232442515ULL,
			1593817887737492140ULL,
			6208551275941677529ULL,
			18289945860007495645ULL,
			15515568871384906532ULL,
			617869504014814139ULL,
			6520035627482522474ULL,
			137668482862995336ULL,
			4598965720456984957ULL,
			11380873159792776985ULL,
			11681250558033758123ULL,
			13468094980194557611ULL,
			12897318426010254287ULL,
			18289927532545893247ULL,
			4877460172521316558ULL,
			11742982006799831806ULL,
			16908026360433324612ULL,
			13750501803293991607ULL,
			1182323342423864917ULL,
			2319462958881871584ULL,
			9412533007857420651ULL,
			2869376014158995761ULL,
			10614544296080672289ULL,
			6857448474756763539ULL,
			11542110075050414845ULL,
			7186670471907941516ULL,
			7929096919393788727ULL,
			14866729164537833746ULL,
			3412549826567492096ULL,
			11130297908609317535ULL,
			10088879573407918591ULL,
			1045216716830116828ULL,
			17853848220472792074ULL,
			16115983323643641174ULL,
			4742708473430040960ULL,
			15167401573492344618ULL,
			8395521781116854798ULL,
			7441664445295624543ULL,
			11094214124715997364ULL,
			6275695045470646332ULL,
			755935653822695890ULL,
			558800626446108294ULL,
			5930704182344396964ULL,
			4331094060636088909ULL,
			2870993855377827457ULL,
			7838129626600207821ULL,
			3538319205255130342ULL,
			8456320765251573850ULL,
			10388317445569445078ULL,
			7886689829638263158ULL,
			7852613996503978277ULL,
			8327077413289598399ULL,
			2336341050099012756ULL,
			1681705134726467046ULL,
			10398129389238050139ULL,
			15707533663581832713ULL,
			7100865996382627760ULL,
			2501385490514578483ULL,
			16456528368790786825ULL,
			4847095203289404503ULL,
			12743551648126895069ULL,
			11456495696746709082ULL,
			2436534387276314820ULL,
			16871965710973146660ULL,
			13842545038154680110ULL,
			12522041323503368500ULL,
			15618515517516681455ULL,
			5429841795674777314ULL,
			18322707600796320324ULL,
			5894862316388214605ULL,
			511664382917205454ULL,
			13266194378960507476ULL,
			5566417008613155188ULL,
			3144789749884417335ULL,
			12817652400617341526ULL,
			11257135823241904720ULL,
			15740486121002418333ULL,
			15545345466998230743ULL,
			10085111487125220372ULL,
			5270024974998427753ULL,
			18440728426663275176ULL,
			2225198834381938512ULL,
			9197986579269136373ULL,
			4601717946083337669ULL,
			1047011985679707643ULL,
			6047751838210290866ULL,
			10190115244654592026ULL,
			10247092805207617680ULL,
			10470637582870075133ULL,
			4775402153418169252ULL,
			283181200143178033ULL,
			10174120573921565574ULL,
			13020231522692509074ULL,
			9256582629482608583ULL,
			1220018165247465549ULL,
			15109274973766678556ULL,
			11111165605588682284ULL,
			14547919358264931992ULL,
			535992771690710202ULL,
			9288146224637965705ULL,
			2670299676132521023ULL,
			17120989288950936339ULL,
			6224660983002762022ULL,
			1894515615353933168ULL,
			10580416227137465449ULL,
			11833508123640618962ULL,
			278685243504557304ULL,
			1629215708014390947ULL,
			14490996197904321902ULL,
			8147524656851514831ULL,
			148209120565259565ULL,
			2837962466600394313ULL,
			15886585961613872905ULL,
			15987005650154879871ULL,
			1101680018335275664ULL,
			11130008005834029523ULL,
			8554590353686330586ULL,
			6881665414090595492ULL,
			11451315943367101731ULL,
			3598168618451747722ULL,
			4535430551597817333ULL,
			16479377774066939878ULL,
			13822789108417991878ULL,
			4972795900879424239ULL,
			16661448171621460430ULL,
			6768628582049143855ULL,
			13531033975708269203ULL,
			481846273212060793ULL,
			6701710608579495505ULL,
			3687394166385822885ULL,
			4072226230678665789ULL,
			2078967596900891536ULL,
			7943849104652520514ULL,
			10762223575583803399ULL,
			3606404458579245625ULL,
			2069855518684265696ULL,
			16899679176494766714ULL,
			17454857109033468841ULL,
			2834354709831969958ULL,
			3699701718777502613ULL,
			8051264616556452341ULL,
			13021688572695644589ULL,
			10506470762241972498ULL,
			17337741588153272081ULL,
			17535583024894083922ULL,
			8048236737083705117ULL,
			12356391339788145879ULL,
			10329793382023478201ULL,
			3208306841878560312ULL,
			11198592763659622420ULL,
			6001974516470374711ULL,
			1525188324240505798ULL,
			340083016175179325ULL,
			14100033826676650870ULL,
			9602172413049836891ULL,
			8850344581350122297ULL,
			8977319920280652281ULL,
			5529518331127376528ULL,
			2170542467702735635ULL,
			7740179343377569115ULL,
			17771269329179638063ULL,
			8873814172872390936ULL,
			18355259638298350303ULL,
			2775800699471602813ULL,
			6505183026912487228ULL,
			409177407311554350ULL,
			15940069340514337208ULL,
			11074755634649249923ULL,
			4920301885249512278ULL,
			2398084878483015988ULL,
			1079524697480207804ULL,
			12589029734116276851ULL,
			13080529872088419916ULL,
			5166057690650125487ULL,
			1230941309581242251ULL,
			14737869871043923876ULL,
			15392916851680631846ULL,
			13802015618008688344ULL,
			2873402149884327347ULL,
			15389091372499930001ULL,
			6038906895515217527ULL,
			16814207317985054862ULL,
			7713276782512845301ULL,
			5064934022228259399ULL,
			17937184143497872305ULL,
			10528843170501720832ULL,
			1041762683003965137ULL,
			2748581685439692689ULL,
			8696218629365229823ULL,
			2203240784782176628ULL,
			5962387632448351573ULL,
			3677113867366886546ULL,
			5412498500751524137ULL,
			13870834282558455243ULL,
			1786179199600274928ULL,
			14740955100443416316ULL,
			8536157178041295090ULL,
			2242075984661061756ULL,
			12553358621836118689ULL,
			7531337299541337544ULL,
			12364680798152664263ULL,
			3795967108841789986ULL,
			13458948782014974964ULL,
			17973502359161090743ULL,
			6724704909763323984ULL,
			5215345024794641531ULL,
			10349962647811950028ULL,
			116412061372550628ULL,
			18024569275210285670ULL,
			12825318214388622965ULL,
			7055063431388336226ULL,
			14724237673046928349ULL,
			10238441476511471856ULL,
			15688658464994654604ULL,
			10461687216771103784ULL,
			8421944988895447247ULL
		};
	}
	
	constexpr inline hash_t getHash(Piece piece, uint8_t file, uint8_t rank) {
		// The magic number belo ws chosen as it leads to an average Hamming distance of 32.02458 bits between other position hashes. Less memory than a full table, but I'd have to verify sometime if it actually impacts performance.
		hash_t hash = PieceHashes[piece.getSpecies()] ^ ((static_cast<hash_t>(file) * 36 + static_cast<hash_t>(rank)) * 0x5C1B4D72E2FFCD75ULL);
		return piece.getOwner()? std::rotr(hash, 32) : hash;
	}
};